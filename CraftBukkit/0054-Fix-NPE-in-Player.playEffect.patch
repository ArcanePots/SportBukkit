From 2efa576b98c48652bcf744fa7d944c9a946bd6ea Mon Sep 17 00:00:00 2001
From: Jedediah Smith <jedediah@silencegreys.com>
Date: Mon, 22 Sep 2014 05:35:35 -0400
Subject: [PATCH] Fix NPE in Player.playEffect


diff --git a/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java b/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java
index 97845ea..d8b7a33 100644
--- a/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java
+++ b/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java
@@ -334,7 +334,7 @@ public class CraftPlayer extends CraftHumanEntity implements Player {
             Validate.isTrue(effect.getData() == null, "Wrong kind of data for this effect!");
         }
 
-        if (data.getClass().equals(MaterialData.class)) {
+        if (data != null && data.getClass().equals(MaterialData.class)) {
             MaterialData materialData = (MaterialData) data;
             Validate.isTrue(!materialData.getItemType().isBlock(), "Material must be block");
             playEffect(loc, effect, materialData.getItemType().getId(), materialData.getData(), 0, 0, 0, 1, 1, 64);
-- 
1.9.0

